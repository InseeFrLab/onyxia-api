{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Vault access",
  "type": "object",
  "properties": {
    "enabled": {
      "title": "Enable Vault access from within the service",
      "type": "boolean",
      "default": true
    },
    "token": {
      "title": "Vault token",
      "type": "string",
      "render": "password",
      "x-onyxia": {
        "overwriteDefaultWith": "{{vault.VAULT_TOKEN}}"
      },
      "hidden": {
        "value": false,
        "path": "enabled",
        "isPathRelative": true
      }
    },
    "url": {
      "title": "Vault server URL",
      "type": "string",
      "x-onyxia": {
        "overwriteDefaultWith": "{{vault.VAULT_ADDR}}"
      },
      "hidden": {
        "value": false,
        "path": "enabled",
        "isPathRelative": true
      }
    },
    "mount": {
      "title": "Secret engine",
      "type": "string",
      "x-onyxia": {
        "overwriteDefaultWith": "{{vault.VAULT_MOUNT}}"
      },
      "hidden": {
        "value": false,
        "path": "enabled",
        "isPathRelative": true
      }
    },
    "directory": {
      "title": "Top-level directory",
      "type": "string",
      "x-onyxia": {
        "overwriteDefaultWith": "{{vault.VAULT_TOP_DIR}}"
      },
      "hidden": {
        "value": false,
        "path": "enabled",
        "isPathRelative": true
      }
    },
    "secret": {
      "title": "Path to the secret to load",
      "description": "The secret will be converted into a list of environment variables",
      "type": "string",
      "default": "",
      "hidden": {
        "value": false,
        "path": "enabled",
        "isPathRelative": true
      }
    }
  }
}
